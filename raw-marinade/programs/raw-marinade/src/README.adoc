= Solana RAW instruction calling

To call Marinade liquid staking program
https://github.com/marinade-finance/liquid-staking-program
with RAW instruction call.

== Localhost setup

To find out how to call the program method with raw txn call
we need to know what is the method identifier
that Anchor generates. The way to do it is to work with the Anchor program
to compile and extend it.

[source,sh]
----
git clone https://github.com/marinade-finance/liquid-staking-program
cd liquid-staking-program


cargo install --git https://github.com/project-serum/anchor avm --locked --force

avm install latest
avm use latest

anchor expand

cat .anchor/expanded-macros/marinade-finance/marinade-finance-*.rs
# search for string 'match sighash {'

cat .anchor/expanded-macros/marinade-finance/marinade-finance-*.rs |\
  grep -B 1 '__private::__global::deposit('
----

[NOTE]
====
If we want to get the Anchor IDL (`./target/idl`) then only version `0.18.0` and lower works.

[source,sh]
----
avm install 0.18.0
avm use 0.18.0
anchor --version

# if the version is the latest one then we can call the anchor directly where it's installed
~/.avm/bin/anchor-0.18.0 --version

~/.avm/bin/anchor-0.18.0 build
----
====